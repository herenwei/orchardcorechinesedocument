



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../..">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-3.0.4">
    
    
      
        <title>OpenId - Orchard Core Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.451f80e5.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.22915126.css">
      
      
        
        
        <meta name="theme-color" content="#3f51b5">
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700|Ubuntu+Mono">
        <style>body,input{font-family:"Ubuntu","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../../#orchardcoreopenid" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Orchard Core Documentation" class="md-header-nav__button md-logo">
          
            <img src="../../images/logo.png" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Orchard Core Documentation
              </span>
              <span class="md-header-nav__topic">
                OpenId
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/OrchardCMS/OrchardDoc/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../.." title="Orchard Core Documentation" class="md-nav__button md-logo">
      
        <img src="../../images/logo.png" width="48" height="48">
      
    </a>
    Orchard Core Documentation
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/OrchardCMS/OrchardDoc/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="About Orchard Core" class="md-nav__link">
      About Orchard Core
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Getting started
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Getting started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../docs/getting-started/" title="Create a CMS Web application" class="md-nav__link">
      Create a CMS Web application
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../docs/getting-started/theme/" title="Create a Theme" class="md-nav__link">
      Create a Theme
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../docs/templates/" title="Code Generation Templates" class="md-nav__link">
      Code Generation Templates
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../OrchardCore/OrchardCore/Modules/" title="Orchard Core Modules" class="md-nav__link">
      Orchard Core Modules
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      CMS Modules
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        CMS Modules
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../OrchardCore.Title/" title="Title" class="md-nav__link">
      Title
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../OrchardCore.Alias/" title="Alias" class="md-nav__link">
      Alias
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../OrchardCore.Autoroute/" title="Autoroute" class="md-nav__link">
      Autoroute
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../OrchardCore.Html/" title="Html" class="md-nav__link">
      Html
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../OrchardCore.Contents/" title="Contents" class="md-nav__link">
      Contents
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../OrchardCore.ContentFields/" title="Content Fields" class="md-nav__link">
      Content Fields
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../OrchardCore.ContentPreview/" title="Content Preview" class="md-nav__link">
      Content Preview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../OrchardCore.ContentTypes/" title="Content Types" class="md-nav__link">
      Content Types
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../OrchardCore.Lists/" title="Lists" class="md-nav__link">
      Lists
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../OrchardCore.Markdown/" title="Markdown" class="md-nav__link">
      Markdown
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../OrchardCore.Media/" title="Media" class="md-nav__link">
      Media
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../OrchardCore.Menu/" title="Menu" class="md-nav__link">
      Menu
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../OrchardCore.Navigation/" title="Navigation" class="md-nav__link">
      Navigation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../OrchardCore.Indexing/" title="Indexing" class="md-nav__link">
      Indexing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../OrchardCore.Lucene/" title="Lucene" class="md-nav__link">
      Lucene
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../OrchardCore.Queries/" title="Queries" class="md-nav__link">
      Queries
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../OrchardCore.Templates/" title="Templates" class="md-nav__link">
      Templates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../OrchardCore.Themes/" title="Themes" class="md-nav__link">
      Themes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../OrchardCore.Liquid/" title="Liquid" class="md-nav__link">
      Liquid
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../OrchardCore.CustomSettings/" title="Custom Settings" class="md-nav__link">
      Custom Settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../OrchardCore.Widgets/" title="Widgets" class="md-nav__link">
      Widgets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../OrchardCore.Flows/" title="Flows" class="md-nav__link">
      Flows
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../OrchardCore.Forms/" title="Forms" class="md-nav__link">
      Forms
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" checked>
    
    <label class="md-nav__link" for="nav-6">
      Core Modules
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Core Modules
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../OrchardCore/OrchardCore.DisplayManagement/" title="Placement" class="md-nav__link">
      Placement
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../OrchardCore.DynamicCache/" title="Dynamic Cache" class="md-nav__link">
      Dynamic Cache
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../OrchardCore.Localization/" title="Localization" class="md-nav__link">
      Localization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../OrchardCore/OrchardCore.Logging.Serilog/readme/" title="Logging Serilog" class="md-nav__link">
      Logging Serilog
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
    <a href="./" title="OpenId" class="md-nav__link md-nav__link--active">
      OpenId
    </a>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../OrchardCore.Recipes/" title="Recipes" class="md-nav__link">
      Recipes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../OrchardCore.Resources/" title="Resources" class="md-nav__link">
      Resources
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../OrchardCore.Roles/" title="Roles" class="md-nav__link">
      Roles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../OrchardCore.Scripting/" title="Scripting" class="md-nav__link">
      Scripting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../OrchardCore.Setup/" title="Setup" class="md-nav__link">
      Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../OrchardCore.Tenants/" title="Tenants" class="md-nav__link">
      Tenants
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../OrchardCore.Workflows/" title="Workflows" class="md-nav__link">
      Workflows
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../OrchardCore.DataProtection.Azure/" title="DataProtection (Azure Storage)" class="md-nav__link">
      DataProtection (Azure Storage)
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/OrchardCMS/OrchardDoc/edit/master/docs/OrchardCore.Modules/OrchardCore.OpenId/README.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="orchardcoreopenid">OrchardCore.OpenId</h1>
<h1 id="orchardcoreopenid_1"><font color=#0099ff size=4 face="黑体">OrchardCore.OpenId</font></h1>
<p><font color=#0099ff size=4 face="黑体"></font> </p>
<h2 id="openid-connect-module">OpenID Connect Module</h2>
<h2 id="openid-connect"><font color=#0099ff size=4 face="黑体">OpenID Connect模块</font></h2>
<p><code>OrchardCore.OpenId</code> provides the following features </p>
<p><font color=#0099ff size=4 face="黑体"></font> </p>
<ul>
<li>
<p>Core Components</p>
</li>
<li>
<p><font color=#0099ff size=4 face="黑体">核心组件</font> </p>
</li>
<li>
<p>Entity Framework Core Stores</p>
</li>
<li>
<p><font color=#0099ff size=4 face="黑体">实体框架核心商店</font> </p>
</li>
<li>
<p>Authorization Server</p>
</li>
<li>
<p><font color=#0099ff size=4 face="黑体">授权服务器</font> </p>
</li>
<li>
<p>Management Interface </p>
</li>
<li>
<p><font color=#0099ff size=4 face="黑体">管理界面</font> </p>
</li>
<li>
<p>Token Validation</p>
</li>
<li>
<p><font color=#0099ff size=4 face="黑体">令牌验证</font> </p>
</li>
<li>
<p>OIDC Client</p>
</li>
<li>
<p><font color=#0099ff size=4 face="黑体">OIDC客户</font> </p>
</li>
</ul>
<p><font color=#0099ff size=4 face="黑体"></font> </p>
<h2 id="core-components">Core Components</h2>
<h2 id="_1"><font color=#0099ff size=4 face="黑体">核心组件</font></h2>
<p>Registers the core components used by the OpenID module.</p>
<p><font color=#0099ff size=4 face="黑体">注册OpenID模块使用的核心组件。</font> </p>
<p><font color=#0099ff size=4 face="黑体"></font> </p>
<h2 id="entity-framework-core-stores">Entity Framework Core Stores</h2>
<h2 id="_2"><font color=#0099ff size=4 face="黑体">实体框架核心商店</font></h2>
<p>Provides an Entity Framework Core 2.x adapter for the OpenID module.</p>
<p><font color=#0099ff size=4 face="黑体">为OpenID模块提供Entity Framework Core 2.x适配器。</font> </p>
<p><font color=#0099ff size=4 face="黑体"></font> </p>
<h2 id="management-interface">Management Interface</h2>
<h2 id="_3"><font color=#0099ff size=4 face="黑体">管理界面</font></h2>
<p>Allows adding, editing and removing the registered applications.</p>
<p><font color=#0099ff size=4 face="黑体">允许添加，编辑和删除已注册的应用程序。</font> </p>
<p><font color=#0099ff size=4 face="黑体"></font> </p>
<h2 id="authorization-server">Authorization Server</h2>
<h2 id="_4"><font color=#0099ff size=4 face="黑体">授权服务器</font></h2>
<p>Enables authentication of external applications using the OpenID Connect/OAuth 2.0 standards.</p>
<p><font color=#0099ff size=4 face="黑体">使用OpenID Connect / OAuth 2.0标准启用外部应用程序的身份验证。</font> </p>
<p>It is based on the <a href="https://github.com/openiddict/openiddict-core">OpenIddict</a> library allowing </p>
<p><font color=#0099ff size=4 face="黑体">它基于[OpenIddict]（https://github.com/openiddict/openiddict-core）库，允许</font> </p>
<p>Orchard Core to act as identity provider to support token authentication without the need of an external identity provider.</p>
<p><font color=#0099ff size=4 face="黑体">Orchard Core充当身份提供者以支持令牌身份验证，而无需外部身份提供者。</font> </p>
<p>So, Orchard Core can also be used as an identity provider for centralizing the user access permissions to external applications, not only to Orchard Core services.</p>
<p><font color=#0099ff size=4 face="黑体">因此，Orchard Core还可以用作身份提供者，将用户访问权限集中到外部应用程序，而不仅仅是Orchard Core服务。</font> </p>
<p><font color=#0099ff size=4 face="黑体"></font> </p>
<p>Flows supported: <a href="http://openid.net/specs/openid-connect-core-1_0.html">code/implicit/hybrid flows</a> and <a href="https://tools.ietf.org/html/rfc6749">client credentials/resource owner password grants</a>.</p>
<p><font color=#0099ff size=4 face="黑体">支持的流程：[代码/隐式/混合流程]（http://openid.net/specs/openid-connect-core-1_0.html）和[客户端凭据/资源所有者密码授予]（https：//tools.ietf .ORG / HTML / rfc6749）。</font> </p>
<p><font color=#0099ff size=4 face="黑体"></font> </p>
<h3 id="configuration">Configuration</h3>
<h2 id="_5"><font color=#0099ff size=4 face="黑体">组态</font></h2>
<p><font color=#0099ff size=4 face="黑体"></font> </p>
<p>Configuration can be set through the <em>OpenID Connect</em> settings menu in the admin dashboard and also through a recipe step.</p>
<p><font color=#0099ff size=4 face="黑体">可以通过管理仪表板中的_OpenID Connect_设置菜单以及配方步骤设置配置。</font> </p>
<p><font color=#0099ff size=4 face="黑体"></font> </p>
<p>Available settings are:</p>
<p><font color=#0099ff size=4 face="黑体">可用的设置是：</font> </p>
<p><font color=#0099ff size=4 face="黑体"></font> </p>
<ul>
<li>Testing Mode: Enabling Testing mode, removes the need of providing a certificate for signing tokens providing an ephemeral key. Also removes the requirement of using an HTTPS for issuing tokens.</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+测试模式：启用测试模式，无需为签名提供临时密钥的令牌提供证书。还消除了使用HTTPS颁发令牌的要求。</font> </p>
<ul>
<li>Token Format: there are two options:</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+令牌格式：有两种选择：</font> </p>
<ul>
<li>JWT: This format uses signed JWT standard tokens (not encrypted). It requires that the SSL certificate being used is accepted as a trusted certificate by the client.</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+ JWT：此格式使用签名的JWT标准令牌（未加密）。它要求客户端使用正在使用的SSL证书作为可信证书。</font> </p>
<ul>
<li>Encrypted: This format uses non-standard opaque tokens encrypted by the ASP.NET data protection block. It doesn't require the client to accept the SSL certificate as a trusted certificate.</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+加密：此格式使用由ASP.NET数据保护块加密的非标准不透明令牌。它不要求客户端将SSL证书作为可信证书接受。</font> </p>
<ul>
<li>Authority: Orchard URL used by Orchard to act as an identity server.</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+ Authority：Orchard用作身份服务器的Orchard URL。</font> </p>
<ul>
<li>Audiences: URLs of the resource servers for which the identity server issues valid JWT tokens.</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+受众：身份服务器为其颁发有效JWT令牌的资源服务器的URL。</font> </p>
<ul>
<li>Certificate Store Location: CurrentUser/LocalMachine https://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.storelocation(v=vs.110).aspx</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+证书商店位置：CurrentUser / LocalMachine https://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.storelocation(v=vs.110).aspx</font> </p>
<ul>
<li>Certificate Store Name: AddressBook/AuthRootCertificateAuthority/Disallowed/My/Root/TrustedPeople/TrustedPublisher https://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.storename(v=vs.110).aspx</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+证书商店名称：AddressBook / AuthRootCertificateAuthority / Disallowed / My / Root / TrustedPeople / TrustedPublisher https://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.storename(v=vs.110）的.aspx</font> </p>
<ul>
<li>Certificate Thumbprint: The thumbprint of the certificate (it is recommended to not use same certificate that is being used for SSL).</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+证书指纹：证书的指纹（建议不要使用用于SSL的相同证书）。</font> </p>
<ul>
<li>Enable Token Endpoint.</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+启用令牌端点。</font> </p>
<ul>
<li>Enable Authorization Endpoint.</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+启用授权端点。</font> </p>
<ul>
<li>Enable Logout Endpoint.</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+启用注销端点。</font> </p>
<ul>
<li>Enable User Info Endpoint.</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+启用用户信息端点。</font> </p>
<ul>
<li>Allow Password Flow: It requires Token Endpoint is enabled. More info at https://tools.ietf.org/html/rfc6749#section-1.3.3</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+允许密码流：它需要启用令牌端点。更多信息，请访问https://tools.ietf.org/html/rfc6749#section-1.3.3</font> </p>
<ul>
<li>Allow Client Credentials Flow: It requires Token Endpoint is enabled. More info at https://tools.ietf.org/html/rfc6749#section-1.3.4</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+允许客户端凭据流：它要求启用令牌端点。更多信息，请访问https://tools.ietf.org/html/rfc6749#section-1.3.4</font> </p>
<ul>
<li>Allow Authorization Code Flow: It requires Authorization and Token Endpoints are enabled. More info at http://openid.net/specs/openid-connect-core-1_0.html#CodeFlowAuth</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+允许授权代码流程：它需要启用授权和令牌端点。更多信息，请访问http://openid.net/specs/openid-connect-core-1_0.html#CodeFlowAuth</font> </p>
<ul>
<li>Allow Implicit Flow: It requires Authorization Endpoint is enabled. More info at http://openid.net/specs/openid-connect-core-1_0.html#ImplicitFlowAuth</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+允许隐式流：它需要启用授权端点。更多信息，请访问http://openid.net/specs/openid-connect-core-1_0.html#ImplicitFlowAuth</font> </p>
<ul>
<li>Allow Refresh Token Flow: It allows to refresh access token using a refresh token. It can be used in combination with Password Flow, Authorization Code Flow and Hybrid Flow. More info at http://openid.net/specs/openid-connect-core-1_0.html#RefreshTokens</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+允许刷新令牌流：它允许使用刷新令牌刷新访问令牌。它可以与密码流，授权代码流和混合流一起使用。更多信息，请访问http://openid.net/specs/openid-connect-core-1_0.html#RefreshTokens</font> </p>
<p><font color=#0099ff size=4 face="黑体"></font> </p>
<p>A sample of OpenID Connect Settings recipe step:</p>
<p><font color=#0099ff size=4 face="黑体">OpenID Connect设置配方步骤示例：</font> </p>
<pre><code>
{

 &lt;font color=#0099ff size=4 face=&quot;黑体&quot;&gt;{&lt;/font&gt; 


      &quot;name&quot;: &quot;OpenIdServerSettings&quot;,

      &quot;TestingModeEnabled&quot;: false,

      &quot;AccessTokenFormat&quot;: &quot;JWT&quot;, //JWT or Encrypted

      &quot;Authority&quot;: &quot;https://www.orchardproject.net&quot;,

      &quot;Audiences&quot;: [&quot;https://www.orchardproject.net&quot;,&quot;https://orchardharvest.org/&quot;],

      &quot;CertificateStoreLocation&quot;: &quot;LocalMachine&quot;, //More info: https://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.storelocation(v=vs.110).aspx

      &quot;CertificateStoreName&quot;: &quot;My&quot;, //More info: https://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.storename(v=vs.110).aspx

      &quot;CertificateThumbprint&quot;: &quot;27CCA66EF38EF46CD9022431FB1FF0F2DF5CA1D7&quot;

      &quot;EnableTokenEndpoint&quot;: true,

      &quot;EnableAuthorizationEndpoint&quot;: false,

      &quot;EnableLogoutEndpoint&quot;: true,

      &quot;EnableUserInfoEndpoint&quot;: true,

      &quot;AllowPasswordFlow&quot;: true,

      &quot;AllowClientCredentialsFlow&quot;: false,

      &quot;AllowAuthorizationCodeFlow&quot;: false,

      &quot;AllowRefreshTokenFlow&quot;: false,

      &quot;AllowImplicitFlow&quot;: false

}

 &lt;font color=#0099ff size=4 face=&quot;黑体&quot;&gt;}&lt;/font&gt; 


</code></pre>

<p><font color=#0099ff size=4 face="黑体"></font> </p>
<h3 id="client-openid-connect-apps-configuration">Client OpenID Connect Apps Configuration</h3>
<h2 id="openid-connect_1"><font color=#0099ff size=4 face="黑体">客户端OpenID Connect应用程序配置</font></h2>
<p><font color=#0099ff size=4 face="黑体"></font> </p>
<p>OpenID Connect apps can be set through OpenID Connect Apps menu in the admin dashboard (through the Management Interface feature) </p>
<p><font color=#0099ff size=4 face="黑体">可以通过管理仪表板中的OpenID Connect Apps菜单（通过管理界面功能）设置OpenID Connect应用程序</font> </p>
<p>and also through a recipe step.</p>
<p><font color=#0099ff size=4 face="黑体">并通过配方步骤。</font> </p>
<p><font color=#0099ff size=4 face="黑体"></font> </p>
<p>OpenID Connect apps require the following configuration.</p>
<p><font color=#0099ff size=4 face="黑体">OpenID Connect应用程序需要以下配置。</font> </p>
<p><font color=#0099ff size=4 face="黑体"></font> </p>
<ul>
<li>Id: Unique identifier.</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+ Id：唯一标识符。</font> </p>
<ul>
<li>Client Id: Client identifier of the application. It has to be provided by a client when requesting a valid token.</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+ Client Id：应用程序的客户端标识符。它必须由客户端在请求有效令牌时提供。</font> </p>
<ul>
<li>Display Name: Display name associated with the current application.</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+显示名称：与当前应用程序关联的显示名称。</font> </p>
<ul>
<li>Type: There are two options:</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+类型：有两种选择：</font> </p>
<ul>
<li>Confidential: Confidential applications MUST send their client secret when communicating with the token and revocation endpoints. This guarantees that only the legit client can exchange an authorization code or get a refresh token.</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+机密：机密应用程序在与令牌和吊销端点通信时必须发送其客户端机密。这保证了只有合法的客户端才能交换授权代码或获取刷新令牌。</font> </p>
<ul>
<li>Public: Public applications don't use client secret on their communications.</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+ Public：公共应用程序不在其通信上使用客户端密钥。</font> </p>
<ul>
<li>Client Secret: Client secret is a password associated with the application. It will be required when the application is configured as Confidential.</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+客户端密钥：客户端密钥是与应用程序关联的密码。将应用程序配置为机密时，将需要它。</font> </p>
<ul>
<li>Flows: If general OpenID Connect settings allow this flow, an app can also enable this flow.</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+流程：如果常规OpenID Connect设置允许此流程，则应用程序也可以启用此流程。</font> </p>
<ul>
<li>Allow Password Flow: It requires Token Endpoint is enabled. More info at https://tools.ietf.org/html/rfc6749#section-1.3.3</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+允许密码流：它需要启用令牌端点。更多信息，请访问https://tools.ietf.org/html/rfc6749#section-1.3.3</font> </p>
<ul>
<li>Allow Client Credentials Flow: It requires Token Endpoint is enabled. More info at https://tools.ietf.org/html/rfc6749#section-1.3.4</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+允许客户端凭据流：它要求启用令牌端点。更多信息，请访问https://tools.ietf.org/html/rfc6749#section-1.3.4</font> </p>
<ul>
<li>Allow Authorization Code Flow: It requires Authorization and Token Endpoints are enabled. More info at http://openid.net/specs/openid-connect-core-1_0.html#CodeFlowAuth</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+允许授权代码流程：它需要启用授权和令牌端点。更多信息，请访问http://openid.net/specs/openid-connect-core-1_0.html#CodeFlowAuth</font> </p>
<ul>
<li>Allow Implicit Flow: It requires Authorization Endpoint is enabled. More info at http://openid.net/specs/openid-connect-core-1_0.html#ImplicitFlowAuth</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+允许隐式流：它需要启用授权端点。更多信息，请访问http://openid.net/specs/openid-connect-core-1_0.html#ImplicitFlowAuth</font> </p>
<ul>
<li>Allow Refresh Token Flow: It allows to refresh access token using a refresh token. It can be used in combination with Password Flow, Authorization Code Flow and Hybrid Flow. More info at http://openid.net/specs/openid-connect-core-1_0.html#RefreshTokens</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+允许刷新令牌流：它允许使用刷新令牌刷新访问令牌。它可以与密码流，授权代码流和混合流一起使用。更多信息，请访问http://openid.net/specs/openid-connect-core-1_0.html#RefreshTokens</font> </p>
<ul>
<li>Normalized RoleNames: This configuration is only required if Client Credentials Flow is enabled. It determines the roles assigned to the app when it is authenticated using that flow.</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+ Normalized RoleNames：仅在启用Client Credentials Flow时才需要此配置。它确定在使用该流进行身份验证时分配给应用程序的角色。</font> </p>
<ul>
<li>Redirect Options: Those options are only required when Implicit Flow, Authorization Code Flow or Allow Hybrid Flow is required:</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+重定向选项：仅在需要隐式流，授权代码流或允许混合流时才需要这些选项：</font> </p>
<ul>
<li>Logout Redirect Uri: logout callback URL</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+ Logout Redirect Uri：注销回调URL</font> </p>
<ul>
<li>Redirect Uri: callback URL</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+重定向Uri：回调URL</font> </p>
<ul>
<li>Skip Consent: sets whether a consent form has to be completed by the user after log in.</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+跳过同意：设置用户在登录后是否必须完成同意书。</font> </p>
<p><font color=#0099ff size=4 face="黑体"></font> </p>
<p>A sample of OpenID Connect App recipe step:</p>
<p><font color=#0099ff size=4 face="黑体">OpenID Connect App配方步骤示例：</font> </p>
<pre><code>
{

 &lt;font color=#0099ff size=4 face=&quot;黑体&quot;&gt;{&lt;/font&gt; 


      &quot;name&quot;: &quot;openidapplication&quot;,

    &lt;font color=#0099ff size=4 face=&quot;黑体&quot;&gt;“name”：“openidapplication”，&lt;/font&gt; 


      &quot;ClientId&quot;: &quot;openidtest&quot;,

      &quot;DisplayName&quot;: &quot;Open Id Test&quot;,

      &quot;Type&quot;: &quot;Confidential&quot;,

       &quot;ClientSecret&quot;: &quot;MyPassword&quot;,

      &quot;EnableTokenEndpoint&quot;: true,

      &quot;EnableAuthorizationEndpoint&quot;: false,

      &quot;EnableLogoutEndpoint&quot;: true,

      &quot;EnableUserInfoEndpoint&quot;: true,

      &quot;AllowPasswordFlow&quot;: true,

      &quot;AllowClientCredentialsFlow&quot;: false,

      &quot;AllowAuthorizationCodeFlow&quot;: false,

      &quot;AllowRefreshTokenFlow&quot;: false,

      &quot;AllowImplicitFlow&quot;: false

}

 &lt;font color=#0099ff size=4 face=&quot;黑体&quot;&gt;}&lt;/font&gt; 


</code></pre>

<p><font color=#0099ff size=4 face="黑体"></font> </p>
<h3 id="configuring-certificates">Configuring Certificates</h3>
<h2 id="_6"><font color=#0099ff size=4 face="黑体">配置证书</font></h2>
<p><font color=#0099ff size=4 face="黑体"></font> </p>
<h4 id="windows-iis">Windows / IIS</h4>
<h2 id="windows-iis_1"><font color=#0099ff size=4 face="黑体">Windows / IIS</font></h2>
<p><font color=#0099ff size=4 face="黑体"></font> </p>
<p>Several tools are available for generating a signing certificate on Windows and/or IIS, for example:</p>
<p><font color=#0099ff size=4 face="黑体">有几种工具可用于在Windows和/或IIS上生成签名证书，例如：</font> </p>
<p><font color=#0099ff size=4 face="黑体"></font> </p>
<ul>
<li>IIS Server Manager <em>(offers limited control)</em></li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+ IIS服务器管理器_（提供有限的控制）_</font> </p>
<pre><code>1. Server Certificates

2. Create Self-Signed Certificate
</code></pre>
<ul>
<li>PowerShell <em>(offers full control)</em></li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+ PowerShell <em>（提供完全控制）</em></font> </p>
<pre><code>1. `New-SelfSignedCertificate`, for example:
</code></pre>
<p><font color=#0099ff size=4 face="黑体"></font> </p>
<pre><code>
# See https://technet.microsoft.com/en-us/itpro/powershell/windows/pkiclient/new-selfsignedcertificate

# &lt;font color=#0099ff size=4 face=&quot;黑体&quot;&gt;请参阅https://technet.microsoft.com/en-us/itpro/powershell/windows/pkiclient/new-selfsignedcertificate&lt;/font&gt; #





 &lt;font color=#0099ff size=4 face=&quot;黑体&quot;&gt;&lt;/font&gt; 


New-SelfSignedCertificate `

 &lt;font color=#0099ff size=4 face=&quot;黑体&quot;&gt;New-SelfSignedCertificate`&lt;/font&gt; 


    -Subject &quot;connect.example.com&quot; `

    -FriendlyName &quot;Example.com Signing Certificate&quot; `

    -CertStoreLocation &quot;cert:\LocalMachine\My&quot; `

    -KeySpec Signature `

    -KeyUsage DigitalSignature `

    -KeyUsageProperty Sign `

    -TextExtension @(&quot;2.5.29.37={text}1.3.6.1.5.5.7.3.1&quot;) `

    -KeyExportPolicy NonExportable `

    -KeyAlgorithm RSA `

    -KeyLength 4096 `

    -HashAlgorithm SHA256 `

    -NotAfter (Get-Date).AddDays(825) `

    -Provider &quot;Microsoft Enhanced RSA and AES Cryptographic Provider&quot;

</code></pre>

<p><font color=#0099ff size=4 face="黑体"></font> </p>
<p><strong>This snippet must be run as admin.</strong> It generates a 4096-bit signing certificate, stores it in the machine store and returns the certificate's thumbprint, which you need in the OpenID Connect Settings recipe or when exporting the certficate through PowerShell. <em>You should update this example according to your requirements!</em></p>
<p><strong> <font color=#0099ff size=4 face="黑体">此代码段必须以管理员身份运行。</strong>它会生成4096位签名证书，将其存储在计算机存储中并返回证书的指纹，您需要在OpenID Connect设置配方中或通过PowerShell导出证书时使用该指纹。 <em>您应该根据您的要求更新此示例！</em></font> </p>
<p><font color=#0099ff size=4 face="黑体"></font> </p>
<p>In multi-node environments consider creating the certificate with <code>-KeyExportPolicy Exportable</code>, then export the certificate (PFX) to a secure location, using the MMC Certificates Snap-In or PowerShell <code>Export-PfxCertificate</code>, and subsequently import the certificate on each node as non-exportable, which is the default when using <code>Import-PfxCertificate</code>. For example:</p>
<p><font color=#0099ff size=4 face="黑体">在多节点环境中，考虑使用<code>-KeyExportPolicy Exportable</code>创建证书，然后使用MMC证书管理单元或PowerShell<code>Export-PfxCertificate</code>将证书（PFX）导出到安全位置，然后在每个环境中导入证书节点为不可导出的，这是使用<code>Import-PfxCertificate</code>时的默认值。例如：</font> </p>
<p><font color=#0099ff size=4 face="黑体"></font> </p>
<pre><code>
# See https://technet.microsoft.com/en-us/itpro/powershell/windows/pkiclient/export-pfxcertificate

# &lt;font color=#0099ff size=4 face=&quot;黑体&quot;&gt;请参阅https://technet.microsoft.com/en-us/itpro/powershell/windows/pkiclient/export-pfxcertificate&lt;/font&gt; #


# Run this on the machine where the certificate was generated:

# &lt;font color=#0099ff size=4 face=&quot;黑体&quot;&gt;在生成证书的计算机上运行此命令：&lt;/font&gt; #





 &lt;font color=#0099ff size=4 face=&quot;黑体&quot;&gt;&lt;/font&gt; 


$mypwd = ConvertTo-SecureString -String &quot;MySecretPassword123&quot; -Force -AsPlainText

 &lt;font color=#0099ff size=4 face=&quot;黑体&quot;&gt;$ mypwd = ConvertTo-SecureString -String“MySecretPassword123”-Force -AsPlainText&lt;/font&gt; 





 &lt;font color=#0099ff size=4 face=&quot;黑体&quot;&gt;&lt;/font&gt; 


Export-PfxCertificate -FilePath C:\securelocation\connect.example.com.pfx cert:\localMachine\my\thumbprintfromnewselfsignedcertificate -Password $mypwd

 &lt;font color=#0099ff size=4 face=&quot;黑体&quot;&gt;Export-PfxCertificate -FilePath C：\\ securelocation \\ connect.example.com.pfx cert：\\ localMachine \\ my \\ thumbprintfromnewselfsignedcertificate -Password $ mypwd&lt;/font&gt; 





 &lt;font color=#0099ff size=4 face=&quot;黑体&quot;&gt;&lt;/font&gt; 


# See https://technet.microsoft.com/en-us/itpro/powershell/windows/pkiclient/import-pfxcertificate

# &lt;font color=#0099ff size=4 face=&quot;黑体&quot;&gt;请参阅https://technet.microsoft.com/en-us/itpro/powershell/windows/pkiclient/import-pfxcertificate&lt;/font&gt; #


# Run this on the target node:

# &lt;font color=#0099ff size=4 face=&quot;黑体&quot;&gt;在目标节点上运行此命令：&lt;/font&gt; #





 &lt;font color=#0099ff size=4 face=&quot;黑体&quot;&gt;&lt;/font&gt; 


$mypwd = ConvertTo-SecureString -String &quot;MySecretPassword123&quot; -Force -AsPlainText

 &lt;font color=#0099ff size=4 face=&quot;黑体&quot;&gt;$ mypwd = ConvertTo-SecureString -String“MySecretPassword123”-Force -AsPlainText&lt;/font&gt; 





 &lt;font color=#0099ff size=4 face=&quot;黑体&quot;&gt;&lt;/font&gt; 


Import-PfxCertificate -FilePath C:\securelocation\connect.example.com.pfx cert:\localMachine\my -Password $mypwd

 &lt;font color=#0099ff size=4 face=&quot;黑体&quot;&gt;Import-PfxCertificate -FilePath C：\\ securelocation \\ connect.example.com.pfx cert：\\ localMachine \\ my -Password $ mypwd&lt;/font&gt; 


</code></pre>

<p><font color=#0099ff size=4 face="黑体"></font> </p>
<p><strong>Important:</strong> In order for the <code>OrchardCore.OpenId</code> module to use the certificate's keys for signing, it requires <code>Read</code> access to the certificate in the store. This can be granted in various ways, for example:</p>
<p><strong> <font color=#0099ff size=4 face="黑体">重要说明：</strong>为了使<code>OrchardCore.OpenId</code>模块使用证书的密钥进行签名，它需要对存储中的证书进行“读取”访问。这可以通过各种方式授予，例如：</font> </p>
<p><font color=#0099ff size=4 face="黑体"></font> </p>
<ul>
<li><code>MMC.exe</code></li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+<code>MMC.exe</code></font> </p>
<pre><code>1. Add Snap-In 'Certificates' for Computer Account

2. Right-Click relevant certificate and select All Tasks, Manage Private Keys

3. Add the relevant identity (e.g. IIS AppPool\PoolName)

4. Check Allow Read
</code></pre>
<ul>
<li><code>WinHttpCertCfg.exe</code> (grants Full Control)</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+<code>WinHttpCertCfg.exe</code>（授予完全控制权）</font> </p>
<pre><code>1. For example: `winhttpcertcfg -g -c LOCAL_MACHINE\My -s connect.example.com -a AppPoolIdentityName` https://msdn.microsoft.com/en-us/library/windows/desktop/aa384088(v=vs.85).aspx
</code></pre>
<p><font color=#0099ff size=4 face="黑体"></font> </p>
<h2 id="token-validation">Token Validation</h2>
<h2 id="_7"><font color=#0099ff size=4 face="黑体">令牌验证</font></h2>
<p>Validates tokens issued by the Orchard OpenID server or by a remote server supporting JWT and OpenID Connect discovery.</p>
<p><font color=#0099ff size=4 face="黑体">验证Orchard OpenID服务器或支持JWT和OpenID Connect发现的远程服务器发出的令牌。</font> </p>
<p><font color=#0099ff size=4 face="黑体"></font> </p>
<h2 id="oidc-client">OIDC Client</h2>
<h2 id="oidc"><font color=#0099ff size=4 face="黑体">OIDC客户</font></h2>
<p>Authenticates users from an external OpenID Connect identity provider. </p>
<p><font color=#0099ff size=4 face="黑体">从外部OpenID Connect身份提供程序验证用户。</font> </p>
<p>If the site allows to register new users, a local user is linked and the external login is linked.</p>
<p><font color=#0099ff size=4 face="黑体">如果站点允许注册新用户，则链接本地用户并链接外部登录。</font> </p>
<p>If an "email" claim is received, and a local user is found, then the external login is linked to that account, after authenticating.</p>
<p><font color=#0099ff size=4 face="黑体">如果收到“电子邮件”声明，并且找到了本地用户，则在进行身份验证后，外部登录将链接到该帐户。</font> </p>
<p><font color=#0099ff size=4 face="黑体"></font> </p>
<h3 id="configuration_1">Configuration</h3>
<h2 id="_8"><font color=#0099ff size=4 face="黑体">组态</font></h2>
<p><font color=#0099ff size=4 face="黑体"></font> </p>
<p>Configuration can be set through the <em>OpenID Connect</em> settings menu in the admin dashboard and also through a recipe step.</p>
<p><font color=#0099ff size=4 face="黑体">可以通过管理仪表板中的_OpenID Connect_设置菜单以及配方步骤设置配置。</font> </p>
<p><font color=#0099ff size=4 face="黑体"></font> </p>
<p>Available settings are:</p>
<p><font color=#0099ff size=4 face="黑体">可用的设置是：</font> </p>
<p><font color=#0099ff size=4 face="黑体"></font> </p>
<ul>
<li>Display Name: Display name of the IdP. It is shown in the login form.</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+显示名称：显示IdP的名称。它显示在登录表单中。</font> </p>
<ul>
<li>Authority: Authority to use when making OpenIdConnect calls.</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+权限：进行OpenIdConnect调用时使用的权限。</font> </p>
<ul>
<li>ClientId: The client_id part of the query.</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+ ClientId：查询的client_id部分。</font> </p>
<ul>
<li>CallbackPath: The request path within the application's base path where the user agent will be returned after sign out from the identity provider. See post_logout_redirect_uri from http://openid.net/specs/openid-connect-session-1_0.html#RedirectionAfterLogout </li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+ CallbackPath：应用程序基本路径中的请求路径，在从身份提供程序注销后将返回用户代理。请参阅http://openid.net/specs/openid-connect-session-1_0.html#RedirectionAfterLogout中的post_logout_redirect_uri</font> </p>
<ul>
<li>SignedOut CallbackPath: the callback endpoint dor signout. Defaults to /signout-callback-oidc.</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+ SignedOut CallbackPath：回调端点dor signout。默认为/ signout-callback-oidc。</font> </p>
<ul>
<li>SignedOut Redirect Uri: The uri where the user agent will be redirected to after application is signed out from the identity provider. The redirect will happen after the SignedOutCallbackPath is invoked.</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+ SignedOut Redirect Uri：应用程序从身份提供程序注销后将用户代理重定向到的uri。重定向将在调用SignedOutCallbackPath之后发生。</font> </p>
<ul>
<li>Scopes: Extra scopes except openid and profile </li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+范围：除openid和profile之外的其他范围</font> </p>
<ul>
<li>Response Mode: Configure Response Mode see: http://openid.net/specs/openid-connect-core-1_0.html#ImplicitAuthResponse. If fragment or query only Code Authentication Flow is allowed.</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+响应模式：配置响应模式请参阅：http：//openid.net/specs/openid-connect-core-1_0.html#ImplicitAuthResponse。如果允许片段或查询仅代码验证流程。</font> </p>
<ul>
<li>Supported Flows: Select on of the OIDC flows</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+支持的流程：选择OIDC流程</font> </p>
<ul>
<li>Code Authentication Flow (see: http://openid.net/specs/openid-connect-core-1_0.html#CodeFlowAuth)</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+代码验证流程（请参阅：http：//openid.net/specs/openid-connect-core-1_0.html#CodeFlowAuth）</font> </p>
<ul>
<li>Hybrid Authentication Flow (see: http://openid.net/specs/openid-connect-core-1_0.html#HybridAuthRequest)</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+混合身份验证流程（请参阅：http：//openid.net/specs/openid-connect-core-1_0.html#HybridAuthRequest）</font> </p>
<pre><code>+ Use 'code id_token' response type (example: http://openid.net/specs/openid-connect-core-1_0.html#code-id_token-tokenExample)

+ Use 'code id_token token' response type (example: http://openid.net/specs/openid-connect-core-1_0.html#code-id_token-tokenExample)

+ Use 'code token' response type (example: http://openid.net/specs/openid-connect-core-1_0.html#code-tokenExample)
</code></pre>
<ul>
<li>Implicit Authentication Flow (see: http://openid.net/specs/openid-connect-core-1_0.html#ImplicitAuthRequest)</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+隐式认证流程（参见：http：//openid.net/specs/openid-connect-core-1_0.html#ImplicitAuthRequest）</font> </p>
<pre><code>+ Use 'id_token' response type (example: http://openid.net/specs/openid-connect-core-1_0.html#id_tokenExample)

+ Use 'id_token token' response type (example: http://openid.net/specs/openid-connect-core-1_0.html#id_token-tokenExample)
</code></pre>
<ul>
<li>Client Secret: It is used with one of the 'confidential' flows, code or hybrid</li>
</ul>
<p><font color=#0099ff size=4 face="黑体">+客户端密钥：它与“机密”流程，代码或混合使用</font> </p>
<p><font color=#0099ff size=4 face="黑体"></font> </p>
<p>A sample of OpenID Connect Client Settings recipe step:</p>
<p><font color=#0099ff size=4 face="黑体">OpenID Connect客户端设置配方步骤示例：</font> </p>
<pre><code>
{

 &lt;font color=#0099ff size=4 face=&quot;黑体&quot;&gt;{&lt;/font&gt; 


      &quot;name&quot;: &quot;OpenIdClientSettings&quot;,

      &quot;Authority&quot;: &quot;http://localhost:44300/t1&quot;,

      &quot;DisplayName&quot;: &quot;Orchard (t1) IdP&quot;,

      &quot;ClientId&quot;: &quot;orchard_t2&quot;, 

      &quot;CallbackPath&quot;: &quot;/signin-oidc&quot;,

      &quot;SignedOutCallbackPath&quot;: &quot;/signout-callback-oidc&quot;,

      &quot;Scopes&quot;: &quot;email phone&quot;,

      &quot;ResponseMode&quot;: &quot;form_post&quot;,

      &quot;ResponseType&quot;: &quot;code id_token&quot;

      &quot;ClientSecret&quot;: &quot;secret&quot;

}

 &lt;font color=#0099ff size=4 face=&quot;黑体&quot;&gt;}&lt;/font&gt; 


</code></pre>

<h2 id="credits">CREDITS</h2>
<h2 id="_9"><font color=#0099ff size=4 face="黑体">学分</font></h2>
<p><font color=#0099ff size=4 face="黑体"></font> </p>
<h3 id="openiddict">OpenIddict</h3>
<h2 id="openiddict_1"><font color=#0099ff size=4 face="黑体">OpenIddict</font></h2>
<p><font color=#0099ff size=4 face="黑体"></font> </p>
<p>https://github.com/openiddict</p>
<p><font color=#0099ff size=4 face="黑体">https://github.com/openiddict</font> </p>
<p>License under Apache License 2.0</p>
<p><font color=#0099ff size=4 face="黑体">Apache License 2.0下的许可</font> </p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../../OrchardCore/OrchardCore.Logging.Serilog/readme/" title="Logging Serilog" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Logging Serilog
              </span>
            </div>
          </a>
        
        
          <a href="../OrchardCore.Recipes/" title="Recipes" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Recipes
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright <a href="http://orchardproject.net">Orchard Project</a>.
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.e72fd936.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
        <script src="../../search/main.js"></script>
      
    
    
      
        <script>!function(e,a,t,n,o,c,i){e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),i=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(c,i)}(window,document,"script",0,"ga"),ga("create","UA-20757794-1","orchardproject.net"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");if(Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var a=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",a,e.href)})}),document.forms.search){var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}</script>
      
    
  </body>
</html>